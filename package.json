{
  "private": true,
  "name": "ecl",
  "version": "1.2.1",
  "publisher": "hpcc-systems",
  "displayName": "ECL Language",
  "description": "ECL (Enterprise Control Language) support for Visual Studio Code",
  "icon": "images/eclIcon.png",
  "categories": [
    "Programming Languages",
    "Snippets",
    "Linters",
    "Debuggers"
  ],
  "main": "./dist/extension.js",
  "scripts": {
    "clean": "rimraf out lib* dist types *.vsix",
    "copy-resources": "cpx ./node_modules/@hpcc-js/ddl-shim/schema/v2.json ./dist",
    "compile": "tsc",
    "compile-watch": "npm run compile -- -watch",
    "compile-es6": "tsc --module es6 --outDir ./lib-es6",
    "compile-es6-watch": "npm run compile-es6 -- -w",
    "compile-umd": "tsc --module umd --outDir ./lib-umd",
    "compile-umd-watch": "npm run compile-umd -- -w",
    "bundle": "rollup -c",
    "bundle-watch": "npm run bundle -- -w",
    "minimize": "terser dist/extension.js -c -m --source-map \"content='dist/extension.js.map',url='extension.min.js.map'\" -o dist/extension.min.js",
    "build": "npm run copy-resources && npm run compile-es6 && npm run bundle",
    "watch": "run-p compile-es6-watch bundle-watch",
    "stamp": "node node_modules/@hpcc-js/bundle/src/stamp.js",
    "lint": "tslint --project . src/**/*.ts",
    "test": "npm run compile",
    "dev-link": "rimraf ./node_modules/@hpcc-js && mklink /J .\\node_modules\\@hpcc-js ..\\hpcc-js\\packages",
    "dev-unlink": "rimraf ./node_modules/@hpcc-js",
    "standard-version": "standard-version",
    "vscode:prepublish": "run-s clean build",
    "git-push": "git push --follow-tags upstream master",
    "preinstall": "npm run dev-unlink || echo \"Clean Install - ignore previous error!\"",
    "postinstall": "node ./node_modules/vscode/bin/install",
    "vsce-publish": "vsce publish",
    "vsce-package": "vsce package",
    "publish": "run-s standard-version git-push vsce-publish"
  },
  "devDependencies": {
    "@hpcc-js/comms": "^2.11.0",
    "@hpcc-js/loader": "^2.11.0",
    "@hpcc-js/marshaller": "^2.19.2",
    "@hpcc-js/util": "^2.8.3",
    "@types/mocha": "^5.2.7",
    "@types/node": "^8.10.54",
    "cpx": "^1.5.0",
    "diff": "^4.0.1",
    "mocha": "^6.2.1",
    "npm-run-all": "^4.1.5",
    "rimraf": "^2.7.1",
    "rollup": "^1.23.1",
    "rollup-plugin-alias": "^2.0.1",
    "rollup-plugin-commonjs": "^10.1.0",
    "rollup-plugin-node-resolve": "^5.2.0",
    "rollup-plugin-postcss": "^2.0.3",
    "rollup-plugin-sourcemaps": "^0.4.2",
    "standard-version": "^7.0.0",
    "tmp": "^0.1.0",
    "tslib": "^1.10.0",
    "tslint": "^5.20.0",
    "typescript": "^3.6.4",
    "vsce": "^1.67.1",
    "vscode": "^1.1.36",
    "vscode-debugadapter": "^1.37.1",
    "vscode-debugprotocol": "^1.37.0"
  },
  "author": {
    "name": "HPCC SystemsÂ®"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/hpcc-systems/vscode-ecl.git"
  },
  "engines": {
    "vscode": "^1.31.0"
  },
  "galleryBanner": {
    "color": "#CFB69A",
    "theme": "light"
  },
  "extensionDependencies": [
    "vscode.json"
  ],
  "activationEvents": [
    "onLanguage:ecl",
    "onLanguage:json"
  ],
  "contributes": {
    "languages": [
      {
        "id": "ecl",
        "extensions": [
          "ecl",
          "ecllib"
        ],
        "aliases": [
          "ECL",
          "ecl"
        ],
        "configuration": "./ecl.configuration.json"
      },
      {
        "id": "json",
        "aliases": [
          "Dashy"
        ],
        "extensions": [
          ".dashy"
        ]
      }
    ],
    "jsonValidation": [
      {
        "fileMatch": "*.dashy",
        "url": "./dist/v2.json"
      }
    ],
    "grammars": [
      {
        "language": "ecl",
        "scopeName": "source.ecl",
        "path": "./syntaxes/ecl.tmLanguage.json"
      }
    ],
    "snippets": [
      {
        "language": "ecl",
        "path": "./snippets/ecl.json"
      }
    ],
    "commands": [
      {
        "command": "ecl.syntaxCheck",
        "title": "ECL: Check Syntax",
        "description": "Save + check syntax of current file."
      },
      {
        "command": "ecl.syntaxCheckAll",
        "title": "ECL: Check Syntax (all files)",
        "description": "Save All + check syntax of all files."
      },
      {
        "command": "ecl.syntaxCheckClear",
        "title": "ECL: Clear all reported problems",
        "description": "Clear all reported ECL problems."
      },
      {
        "command": "ecl.showECLWatch",
        "title": "ECL: Show Workunits",
        "description": "Show workunits associated with current file."
      },
      {
        "command": "ecl.showLanguageReference",
        "title": "ECL: Language Reference (online)",
        "description": "Visit the language reference website."
      },
      {
        "command": "ecl.searchTerm",
        "title": "ECL: Search the currently selected term.",
        "description": "Utilises the HPCC Search functionality on the website for documentation."
      },
      {
        "command": "ecl.openWUDetails",
        "title": "ECL: Open Workunit Details",
        "description": "Open ECL Watch Workunit Details page."
      },
      {
        "command": "dashy.view",
        "title": "View Dashboard",
        "icon": {
          "dark": "./images/dashy-view-dark.svg",
          "light": "./images/dashy-view.svg"
        }
      },
      {
        "command": "dashy.edit",
        "title": "Edit Dashboard",
        "icon": {
          "dark": "./images/dashy-edit-dark.svg",
          "light": "./images/dashy-edit.svg"
        }
      }
    ],
    "menus": {
      "explorer/context": [
        {
          "when": "resourceLangId == json && resourceExtname == .dashy",
          "command": "dashy.view",
          "group": "navigation@998"
        },
        {
          "when": "resourceLangId == json && resourceExtname == .dashy",
          "command": "dashy.edit",
          "group": "navigation@999"
        }
      ],
      "editor/context": [
        {
          "when": "resourceLangId == json && resourceExtname == .dashy",
          "command": "dashy.view",
          "group": "navigation@998"
        },
        {
          "when": "resourceLangId == json && resourceExtname == .dashy",
          "command": "dashy.edit",
          "group": "navigation@999"
        }
      ],
      "editor/title": [
        {
          "when": "resourceLangId == json && resourceExtname == .dashy",
          "command": "dashy.view",
          "group": "navigation@998"
        },
        {
          "when": "resourceLangId == json && resourceExtname == .dashy",
          "command": "dashy.edit",
          "group": "navigation@999"
        }
      ]
    },
    "keybindings": [
      {
        "command": "ecl.searchTerm",
        "key": "shift+f1",
        "mac": "shift+f1",
        "when": "editorTextFocus"
      },
      {
        "command": "ecl.syntaxCheck",
        "key": "f7",
        "mac": "f7",
        "when": "editorTextFocus"
      },
      {
        "command": "ecl.syntaxCheckAll",
        "key": "shift+f7",
        "mac": "shift+f7"
      },
      {
        "command": "ecl.syntaxCheckClear",
        "key": "ctrl+f7",
        "mac": "ctrl+f7"
      },
      {
        "command": "ecl.showECLWatch",
        "key": "shift+f8",
        "mac": "shift+f8",
        "when": "editorTextFocus"
      },
      {
        "command": "dashy.view",
        "key": "ctrl+shift+V",
        "mac": "ctrl+shift+V",
        "when": "editorTextFocus"
      },
      {
        "command": "dashy.edit",
        "key": "ctrl+alt+shift+V",
        "mac": "ctrl+alt+shift+V",
        "when": "editorTextFocus"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "ecl-explorer",
          "title": "hpcc-systems",
          "icon": "images/ecl-explorer.svg"
        }
      ]
    },
    "views": {
      "ecl-explorer": [
        {
          "id": "eclWatch",
          "name": "ECL Watch"
        }
      ]
    },
    "breakpoints": [
      {
        "language": "ecl"
      }
    ],
    "debuggers": [
      {
        "type": "ecl",
        "label": "ECL",
        "program": "./dist/debugger.js",
        "runtime": "node",
        "configurationAttributes": {
          "launch": {
            "required": [
              "workspace",
              "serverAddress",
              "protocol",
              "port",
              "targetCluster"
            ],
            "properties": {
              "mode": {
                "type": "string",
                "enum": [
                  "submit",
                  "compile",
                  "publish",
                  "debug"
                ],
                "default": "submit"
              },
              "workspace": {
                "type": "string",
                "description": "Workspace relative path to the program folder (or any file within that folder) when in 'debug' or 'test' mode, and to the pre-built binary file to debug in 'exec' mode.",
                "default": "${workspaceRoot}"
              },
              "program": {
                "default": "${file}"
              },
              "serverAddress": {
                "type": "string",
                "description": "Server IP/Domain address.",
                "default": "127.0.0.1"
              },
              "protocol": {
                "type": "string",
                "description": "Server protocol (http or https).",
                "enum": [
                  "http",
                  "https"
                ],
                "default": "http"
              },
              "port": {
                "type": "number",
                "description": "The WsWorkunits port.",
                "default": 8010
              },
              "abortSubmitOnError": {
                "type": "boolean",
                "description": "Abort submit when errors are reported during archive generation.",
                "default": true
              },
              "rejectUnauthorized": {
                "type": "boolean",
                "description": "Reject unauthorized calls e.g. SSL certificate errors.",
                "default": false
              },
              "targetCluster": {
                "type": "string",
                "description": "Target cluster.",
                "default": "hthor"
              },
              "eclccPath": {
                "type": "string",
                "description": "Override eclcc auto detection",
                "default": "${config:ecl.eclccPath}"
              },
              "eclccArgs": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Build flags, to be passed to the eclcc compiler.",
                "default": []
              },
              "includeFolders": {
                "type": "string",
                "description": "External folders used by IMPORT",
                "default": "${config:ecl.includeFolders}"
              },
              "legacyMode": {
                "type": "string",
                "description": "Legacy Mode.",
                "default": "${config:ecl.legacyMode}"
              },
              "resultLimit": {
                "type": "number",
                "description": "Max result limit for workunit results",
                "default": 100
              },
              "user": {
                "type": "string",
                "description": "User ID",
                "default": ""
              },
              "password": {
                "type": "string",
                "description": "User password",
                "default": ""
              }
            }
          }
        },
        "initialConfigurations": [
          {
            "name": "localhost-hthor",
            "type": "ecl",
            "request": "launch",
            "mode": "submit",
            "workspace": "${workspaceRoot}",
            "program": "${file}",
            "protocol": "http",
            "serverAddress": "localhost",
            "port": 8010,
            "rejectUnauthorized": false,
            "targetCluster": "hthor",
            "eclccPath": "${config:ecl.eclccPath}",
            "eclccArgs": [],
            "includeFolders": "${config:ecl.includeFolders}",
            "legacyMode": "${config:ecl.legacyMode}",
            "resultLimit": 100,
            "user": "",
            "password": ""
          }
        ],
        "configurationSnippets": [
          {
            "label": "ECL:  localhost-hthor",
            "description": "A new configuration to submit ECL to localhost, hthor.",
            "body": {
              "name": "localhost-hthor-submit",
              "type": "ecl",
              "request": "launch",
              "mode": "submit",
              "workspace": "^\"\\${workspaceRoot}\"",
              "program": "^\"\\${file}\"",
              "protocol": "http",
              "serverAddress": "localhost",
              "port": 8010,
              "rejectUnauthorized": false,
              "targetCluster": "hthor",
              "eclccPath": "^\"\\${config:ecl.eclccPath}\"",
              "eclccArgs": [],
              "includeFolders": "^\"\\${config:ecl.includeFolders}\"",
              "legacyMode": "^\"\\${config:ecl.legacyMode}\"",
              "resultLimit": 100,
              "user": "",
              "password": ""
            }
          }
        ]
      }
    ],
    "configuration": {
      "type": "object",
      "title": "ECL configuration",
      "properties": {
        "ecl.syntaxArgs": {
          "type": "array",
          "scope": "resource",
          "items": {
            "type": "string"
          },
          "default": [
            "-syntax"
          ],
          "description": "eclcc syntax check arguments."
        },
        "ecl.syntaxCheckOnSave": {
          "type": "boolean",
          "scope": "resource",
          "default": true,
          "description": "Run 'eclcc -syntax' on save."
        },
        "ecl.syntaxCheckOnLoad": {
          "type": "boolean",
          "scope": "resource",
          "default": true,
          "description": "Run 'eclcc -syntax' on load."
        },
        "ecl.includeFolders": {
          "type": "array",
          "scope": "resource",
          "items": {
            "type": "string"
          },
          "default": [],
          "description": "External folders use by IMPORT."
        },
        "ecl.eclccPath": {
          "type": "string",
          "scope": "resource",
          "default": "",
          "description": "Override eclcc auto detection."
        },
        "ecl.legacyMode": {
          "type": "boolean",
          "scope": "resource",
          "default": false,
          "description": "Add '-legacy' arguement to eclcc."
        },
        "ecl.WUOpenExternal": {
          "type": "boolean",
          "scope": "resource",
          "default": true,
          "description": "Open WU in external browser."
        },
        "ecl.WUAutoOpen": {
          "type": "boolean",
          "scope": "resource",
          "default": false,
          "description": "Automatically open WU on creation."
        },
        "ecl.debugLogging": {
          "type": "boolean",
          "scope": "resource",
          "default": false,
          "description": "Debug level logging (requires restart)"
        },
        "dashy.libraryLocation": {
          "type": "string",
          "scope": "resource",
          "enum": [
            "latest",
            "localPath"
          ],
          "default": "latest",
          "description": "Dashy library location (bundled, latest, localPath)"
        },
        "dashy.localPath": {
          "type": "string",
          "scope": "resource",
          "default": "",
          "description": "Dashy Library Path (libraryLocation === \"localPath\")"
        }
      }
    }
  }
}
